import Link from 'next/link'
import { useState, useEffect } from 'react'
import CartDropdown from './CartDropdown'
import SocialLinks from './SocialLinks'

const links = [
   { href: '/shop', label: 'Shop' },
   { href: '/my-story', label: 'My Story' },
   { href: '/portfolio', label: 'Portfolio' },
]

export default function NavBar({ setNoScroll }) {
   const [isMenuOpen, setIsMenuOpen] = useState(false)
   const [isCartOpen, setIsCartOpen] = useState(false)

   const toggleMenu = () => {
      setIsMenuOpen(!isMenuOpen)
      setIsCartOpen(false)
   }

   const toggleCart = () => {
      setIsCartOpen(!isCartOpen)
      setIsMenuOpen(false)
   }

   useEffect(() => {
      isMenuOpen || isCartOpen ? setNoScroll(true) : setNoScroll(false)
   }, [isMenuOpen, isCartOpen])

   return (
      <nav className="sm:flex justify-items-center items-center text-white sm:w-screen">
         <div className={`${isMenuOpen || isCartOpen ? 'absolute inset-0 bg-theme-grey-900 sm:static sm:bg-transparent' : ''} flex flex-col sm:flex-1 sm:flex-row sm:justify-between sm:items-start sm:py-2 sm:px-8 z-10`}>
            <div className="flex justify-between items-start py-2 px-4 sm:py-0 sm:px-0 sm:w-1/6">
               <button onClick={toggleMenu} className="sm:hidden mt-2">
                  {!isMenuOpen && <svg className="h-6 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.333 96H10.667C4.779 96 0 100.779 0 106.667s4.779 10.667 10.667 10.667h490.667c5.888 0 10.667-4.779 10.667-10.667S507.221 96 501.333 96zM501.333 245.333H10.667C4.779 245.333 0 250.112 0 256s4.779 10.667 10.667 10.667h490.667c5.888 0 10.667-4.779 10.667-10.667s-4.78-10.667-10.668-10.667zM501.333 394.667H10.667C4.779 394.667 0 399.445 0 405.333 0 411.221 4.779 416 10.667 416h490.667c5.888 0 10.667-4.779 10.667-10.667-.001-5.888-4.78-10.666-10.668-10.666z" /></svg>}
                  {isMenuOpen && <svg className="h-4 m-1 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001"><path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0014.143 5.857 19.94 19.94 0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z" /></svg>}
               </button>
               <div>
                  <Link href="/">
                     <a className="text-3xl font-semibold no-underline">
                        <svg className="h-16 sm:h-20 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 524 524"><path d="M249.9 61.9c-1.4.4-3.6 1.4-5 2.1-1.3.8-7.4 1.9-13.4 2.6-16.8 2-34.9 8.5-54.5 19.8-4.1 2.4-11.5 6-16.5 8.1-23.2 9.6-36.7 17.1-57 31.9C84.4 140.3 79 144.9 79 147.2c0 2.4-9.7 11.9-11.4 11.2-1.5-.6-16.3 11.4-20.6 16.8-2 2.3-4.7 6.1-6 8.3-1.3 2.2-5.7 7.6-9.7 12-13.7 14.9-23.1 30.7-27.7 46.9-3.7 12.5-3.5 20.6.4 28 1.6 3.1 2.7 6.3 2.4 7.1-1 2.5 7.1 10 14.3 13.3 13.4 6.2 25.5 7.7 37.8 4.7 3.4-.7 9.9-1.6 14.5-2 11.9-.8 18.9-2.1 31.2-6.1 10.6-3.4 14.1-5.4 9.6-5.4-2.2-.1-2.2-.1.7-2.8 3.4-3 16.3-6.9 19.2-5.7 1.4.5.7 1.1-3.2 2.7-6.4 2.5-8.3 4.3-3.6 3.3 9.4-2 38.4-16 52.1-25.1 5.3-3.5 12-7.4 15-8.7 17.3-7.7 68.8-51.6 79.3-67.7 6.9-10.4 6.7-24.2-.2-28.3-5.8-3.4-14.4-1.6-16.9 3.5-1.1 2.3-.9 3.1.9 6.3 2.1 3.4 2.4 3.6 5.8 3 2-.4 4-.7 4.5-.8 2.9-.6.6 3.3-7.1 11.9-4.8 5.5-10.3 11.7-12.1 13.9-9 10.7-51.1 41.7-72.9 53.7-12.3 6.7-10.2 7.3 2.7.8 9.9-5 8.1-2.7-2.7 3.4-9.9 5.6-41.2 19.6-43.8 19.6-.7 0-1.5-.4-1.7-.9-.2-.5-7 1.4-15.3 4.1C83.4 278.4 65.8 282 47.6 282c-24.3 0-33-5-34.3-19.8-1.1-12.4 7.2-34 19.5-50.4 26.4-35.3 64.2-67.4 115.7-98.3 19-11.4 32.5-17.5 55-24.9 28.3-9.3 38.7-11.7 53.1-12.3 14.3-.7 18.6.3 20.4 4.7.7 1.7 1.8 3 2.4 3 .6 0 1.9.9 2.9 2 .9 1.1 2.3 2 3.1 2 1.8 0 4.6-3.8 4.6-6.3 0-2.7-3.6-9.1-7.1-12.6-5.6-5.6-10.3-7.4-20.9-7.7-5.2-.2-10.7 0-12.1.5zm-87 37.3c.8 2.1 0 2.9-8.8 8.6-5.3 3.4-11.4 6.7-13.6 7.3-2.2.6-8.4 3.4-13.8 6.2-5.3 2.7-9.9 4.8-10.1 4.6-.7-.7 15.8-11.6 31.4-20.8 7.4-4.4 13.6-8 13.8-8 .1-.1.6.9 1.1 2.1zm67.3 113.7c-5.5 5.2-23.6 18.5-20.4 15 1.7-1.9 25.6-20.8 26.2-20.8.3 0-2.3 2.6-5.8 5.8zm-124.5 70.7c-.3.3-1.2.4-1.9.1-.8-.3-.5-.6.6-.6 1.1-.1 1.7.2 1.3.5zM83 286c-1.9 1.3-3 1.3-3 0 0-.6 1-1 2.3-1 1.8 0 1.9.2.7 1zm-6 1c-.8.5-3.1.9-5 .9-2.9 0-3.1-.2-1.5-.9 1.1-.5 3.4-.9 5-.9 2.3-.1 2.6.2 1.5.9zM504.9 80.5c-2.5 1.9-17.9 17.7-34.1 35.2-42.8 46-65.1 67.4-67.6 64.9-.6-.7 1.5-12.9 7.2-39.6 4.5-21.6 5.4-30.1 3.3-33.1-2.3-3.2-6.8-5.9-10.1-5.9-3.5 0-10.9 7.3-26.5 26-5.8 6.9-17.6 20.4-26.2 30-8.7 9.6-19.7 22.4-24.6 28.4-4.8 6-12.1 13.9-16.2 17.5l-7.4 6.6.8-3.5c2-9.3 38.4-85.5 46.9-98.3 2.8-4.3 3.6-6.4 3.2-8.2-.8-3.3-4-5-5.6-3-.7.8-2.3 1.5-3.6 1.5-3.2 0-3.4.3-24.4 42.5-18.5 37.3-30.1 64.4-32.6 76.7-1.3 6.2-1.3 7.3 0 9.3 1.7 2.6 6.3 4 10.4 3 1.5-.3 5.7-3.1 9.3-6.3 11.5-9.9 46.9-48.7 56.8-62.1 6-8.1 34.7-39.5 37.8-41.4 1.8-1.1 1.8-.7-2.8 20.7-7.1 33.4-8.1 47-3.5 50.1 1.1.8 2.6 1.5 3.3 1.5 1.9 0 1.6-1.8-.4-2.3-1.3-.3-1.2-.5.5-.6 1.3 0 3.3.4 4.5 1.1 2.1 1.1 2.1 1.1.2 1.8-1.8.7-1.8.9-.3 1.5 1.1.4 4.3-.6 8.5-2.7 6.5-3.2 19.4-14.3 30.7-26.7 2.3-2.5 9.7-10.4 16.6-17.6 6.9-7.3 17.5-19 23.5-26 6.1-7.1 14.8-16.7 19.5-21.4 8.4-8.5 8.5-8.6 8.8-5.6.3 3.2-11.1 38-19.4 59-10.2 26.2-32.1 90.3-38.8 114-11.3 40.2-23 100.6-27.2 140.6-1.8 17.4-1.5 37.1.6 44.3 1.5 5.1 5.6 9.1 10.7 10.6 7.9 2.4 12.9-1.5 5.8-4.4-4.1-1.8-4.6-3.6-.9-3.6h2.7l-3.4-2.3c-5.3-3.5-6-5.9-5.4-16.7 1.8-30.3 3.6-51.9 4.5-55 .6-1.9 2.9-13.2 5.1-25 2.2-11.8 6.5-34 9.5-49.3 3.1-15.4 5.4-28.1 5.2-28.3-.3-.2-1.7 2.9-3.1 6.9l-2.7 7.2.4-5.1c.3-2.8 2.7-10.9 5.4-18s5.7-15.6 6.7-18.9c2.1-7.4 3.5-10.1 4.4-8.7.3.6 7.6-18 16-41.4 8.5-23.4 15.1-42.7 14.8-43-.3-.3-.8.5-1.2 1.8-.8 2.7-10.6 27.9-13.6 35.3-1.2 2.7-3.7 9-5.5 14-4.3 11.3-5.5 13.6-7.6 15.5-1 .8-2.6 3.7-3.7 6.5-1.5 3.7-2 4.3-2 2.6-.1-3.5 3.8-17.6 5.5-19.8 1.3-1.7 1.4-1.7.7.2-.3 1.1-.4 1.8-.1 1.5.6-.5 16.1-40.9 27.1-70.5 7.3-19.5 8.5-22.5 9.7-22.5.9 0-2.2 9.9-7.4 23.4-1.7 4.4-2.3 7.3-1.7 8.3.9 1.7 1.5.4 9.3-21.2 13.3-36.5 15.1-52.1 6.3-51.9-1.8 0-3.5-.7-4.3-1.8-1.8-2.5-3-2.3-8.3 1.7zM442 162.9c0 1.5-8.9 9.1-10.7 9.1-1.2-.1-.1-1.6 3.7-5 5.5-4.9 7-5.8 7-4.1zm-43.6 21.6c1.4 1 1.7 1.8 1 2.5-1.5 1.5-4.4.1-4.4-2.1 0-2.3.8-2.3 3.4-.4zm8.2 0c-2.1 1.6-3.2 1.3-2.1-.4.3-.6 1.4-1.1 2.3-1.1 1.5.1 1.5.2-.2 1.5zm-107.5 9.2c-1 2.7-2.7 6.8-3.6 9.3-2.3 5.8-4 7.6-3.2 3.4.8-4.2 6.7-17.4 7.8-17.4.5 0 0 2.1-1 4.7zm138.6 263.8c.3.9.2 1.9-.1 2.3-.8.8-3.8-1-4.4-2.6-.6-1.8 3.8-1.4 4.5.3z" /></svg>
                     </a>
                  </Link>
               </div>
               <div className="block sm:hidden mt-2">
                  <CartDropdown isCartOpen={isCartOpen} toggleCart={toggleCart} />
               </div>

            </div>
            <div className={`${isMenuOpen ? 'flex' : 'hidden'} sm:flex items-center flex-1 sm:flex-0 sm:w-3/4 sm:mt-2`}>
               <ul className={`mx-auto mb-16 sm:mb-0 text-center text-3xl sm:text-xl sm:flex sm:justify-between sm:items-center sm:space-x-8 font-thin`}>
                  {links.map(({ href, label }) => (
                     <li key={`${href}${label}`} className="px-4 py-2 sm:px-0 sm:py-0">
                        <Link href={href}>
                           <a className="no-underline hover:text-gray-400">{label}</a>
                        </Link>
                     </li>
                  ))}
               </ul>
            </div>
            <div className={`${isMenuOpen ? 'flex' : 'hidden'} sm:flex object-bottom mb-8 sm:mb-0 sm:static justify-center sm:justify-end sm:items-center sm:w-1/6 sm:mt-3`}>
               <SocialLinks />
               <div className="hidden sm:block sm:ml-6 hover:text-gray-400">
                  <CartDropdown isCartOpen={isCartOpen} toggleCart={toggleCart} />
               </div>
            </div>
         </div>
      </nav>
   )
}
